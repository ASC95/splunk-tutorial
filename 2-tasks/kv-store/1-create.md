- https://dev.splunk.com/enterprise/docs/developapps/manageknowledge/kvstore/usingconfigurationfiles
- https://dev.splunk.com/enterprise/docs/developapps/manageknowledge/kvstore/uselookupswithkvstore/
# Examples
## Create a KV Store Collection
### Files
#### $SPLUNK_HOME/etc/apps/untopchan/default/collections.conf
```
[buses]
enforceTypes = true
field.name = string
field.id = number
field.longitude = number
field.latitude = number
field.status = string
```
- The only required component of a KV Store collection definition is the name of the stanza
  - Everything else is either for enforcing type restrictions (optional) or creating accelerations (optional)
#### $SPLUNK_HOME/etc/apps/untopchan/default/transforms.conf
```
[buses_kvlookup]
external_type = kvstore
collection = buses
fields_list = _key, name, id, longitude, latitude, status
```
- The `external_type` and `collection` attributes are required
- The `field_list` contains the fields that I want to be searchable
  - The `_key` field is an autogenerated field that contains a unique hash primary key for every KV Store record
    - The value of this field is automatically populated by `outputlookup` if the `key_field` parameter isn't set
      - See `splunk/3-tools/spl-commands/lookup-related/outputlookup/kv-store-related.md`
    - In the case of the REST API...
    - In the case of the Splunk JS stack...
# Purpose
- Creating a KV Store collection via `collections.conf` and `transforms.conf` _is_ how to use the KV Store
## Enforcing data types
- `enforceTypes` is an optional attribute
  - When it's true, an invalid value causes an entier record insertion/update to fail
  - When it's false, the "field value is ignored but the record is inserted"
    - So what replaces the field value, null?... (check)
  - When it's not listed at all ...(check)
## Name the collection
- Each top-level stanza creates a new collection (i.e. database table) in the context of the app
  - The stanza name _is_ the collection name
